<script src="js/jquery-3.5.1.min.js"></script>
<script src="js/jquery-ui.js"></script>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet"
      integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6" crossorigin="anonymous">

<script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-b5kHyXgcpbZJO/tY9Ul7kGkf1S0CWuKcCD38l8YkeH8z8QjE0GmW1gYU5S9FOnJ0"
        crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<script src="js/chart/chartpage.js?ver=1"></script>
<script>
    $(document).ready(function () {
        var date = new Date();
        var year = date.getFullYear();
        var month = date.getMonth() + 1;
        var day = date.getDate();
        var hour = date.getHours();

        $("#strTime").text("( " + year + "." + month + "." + day + ". " + hour + "시 기준 )");
        $("#fileDownTime").val(year + "-" + month + "-" + day + " " + hour + "시");

        var stDate = new Date('march 7,2017');
        var endDate = new Date();

        var btMs = endDate.getTime() - stDate.getTime();
        var btDay = Math.floor(btMs / (1000 * 60 * 60 * 24));

        $(".stdDate").text(btDay);


        $(".close").click(function(){
            $("#dailyModal").modal('hide');
            if(dailyChart != "" && dailyChart != undefined){
                dailyChart.destroy();
            }
        })

        $("a[name=card-graph]").click(function () {

            $("a[name=card-graph]").each(function () {
                $(this).removeClass("active");
            })
            $(this).addClass("active");
            monthlyChart.destroy();
            getCharForGraph($(this).find("input[name=site-name]").val());
        });

        $("a[name=card-check]").click(function () {

            var cardName = $(this).find("input[name=card-name]").val();

          if(  $("#" + cardName).hasClass('appear')){
              $("#" + cardName).addClass('disappear');
              setTimeout(function(){
                  $("#" + cardName).removeClass('appear');
                  $("#" + cardName).css('display','none');
              },500);

          }else {

              $("#" + cardName).css('display','block');
              $("#" + cardName).addClass('appear');
              $("#" + cardName).removeClass('disappear');

          }
        })


    });

    function captureBody() {
        $("#infoArea_a").css("display", "none");
        $("#infoArea_b").css("display", "block");
        $(".check-area").css("display", "none");
        $("#btnDiv").css("display", "none");
        try {
            html2canvas(document.querySelector(".container"), {logging: true, letterRendering: 1, allowTaint: false}
            ).then(canvas => {
                var el = document.getElementById("target");
                el.href = canvas.toDataURL("image/jpeg");
                el.download = $("#fileDownTime").val() + ' 순위.jpg';
                el.click();
            });
        } catch (e) {
        } finally {
            $("#infoArea_a").css("display", "block");
            $("#infoArea_b").css("display", "none");
            $(".check-area").css("display", "block");
            $("#btnDiv").css("display", "block");
        }
    }



</script>
<!doctype html>
<html lang="en">
<head>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-5RC9EDDVEW"></script>
    <script>
        window.dataLayer = window.dataLayer || [];

        function gtag() {
            dataLayer.push(arguments);
        }

        gtag('js', new Date());
        gtag('config', 'G-5RC9EDDVEW');
    </script>
    <!--  Naver Analytics -->
    <script type="text/javascript" src="//wcs.naver.net/wcslog.js"></script>
    <script type="text/javascript">
        if (!wcs_add) var wcs_add = {};
        wcs_add["wa"] = "92d730a3d68800";
        if (window.wcs) {
            wcs_do();
        }
    </script>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no, user-scalable=no">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>쁘-챠트</title>
    <!-- Bootstrap core CSS -->
    <link href="../../css/bootstrap.min.css" rel="stylesheet">
    <!-- Custom styles for this template -->
    <link href="../../css/album.css" rel="stylesheet">
    <link href="../../css/default.css" rel="stylesheet">
</head>

<body>


<main role="main">
    <section class="jumbotron text-center">
        <div class="container">

            <div class="modal fade bd-example-modal-lg" id="dailyModal" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true">
                <div class="modal-dialog modal-lg">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="dailyModalLabel"><span id="daily-modal-info"></span></h5>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                        <div class="modal-body">
                            <div style="width:100%;overflow-x: scroll;">
                                <div id="daily-canvas-area">
                                    <canvas id="daily-area"></canvas>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <hr class="lineBold"/>
            <h1 class="title">브레이브걸스 <br/>음원사이트별 순위</h1>
            <hr class="lineBold"/>
            <div><span id="strTime" style="font-size: 1.2em; font-weight: bold"></span>
                <input type="hidden" id="fileDownTime"/>
            </div>
            <div style="text-align: right; display: none;" id="btnDiv">
                <a href="#" class="btn btn-sm btn-outline-secondary my-2" onclick="location.reload();">새로고침</a>
<!--                <a href="#" class="btn btn-sm btn-outline-secondary my-2" onclick="javascript:captureBody();">캡쳐</a>-->
            </div>
            <div class="subTitle"><p>1. 음원사이트별 순위</p></div>
            <div class="smallTitle"><p>❏ 개&nbsp;&nbsp;&nbsp;&nbsp;요</p></div>
            <div class="infoArea" id="infoArea_a">
                <p> ○ 브레이브걸스 역주행에 따른 일간 차트 보고 간소화</p>
                <p> ○ 운영자는 본사이트에서 제공하는 정보 사용/공유로 인해 발생된 문제의 책임은 지지 않는다.</p>
                <p> ○ 역주행 신화를 이룬 곡인 롤린(Rollin')은 2017년 3일 7일 발매된 앨범 Rollin'의 타이틀 곡으로 발매된지는 금일
                    기준으로 <span class="stdDate" style="color: #0a5eff"> </span> 일이 되었다.</p>
            </div>
            <div class="infoArea" id="infoArea_b" style="display: none;">
                <p> ○ 브레이브걸스 역주행에 따른 일간 차트 보고 간소화</p>
            </div>
            <div class="smallTitle"><p>❏ 순위 및 차트</p></div>
            <!-- Tab을 구성할 영역 설정-->
            <div style="margin:10px;">
                <nav>
                    <div class="nav nav-tabs" id="nav-tab" role="tablist">
<!--                        <button class="nav-link" id="nav-rank-tab" data-bs-toggle="tab" data-bs-target="#nav-rank"-->
<!--                                type="button" role="tab" aria-controls="nav-rank" aria-selected="false">순위-->
<!--                        </button>-->
<!--                        <button class="nav-link active" id="nav-graph-tab" data-bs-toggle="tab"-->
<!--                                data-bs-target="#nav-graph" type="button" role="tab" aria-controls="nav-graph"-->
<!--                                aria-selected="true">그래프-->
<!--                        </button>-->
                                                <button class="nav-link active" id="nav-rank-tab" data-bs-toggle="tab" data-bs-target="#nav-rank" type="button" role="tab" aria-controls="nav-rank" aria-selected="true">순위</button>
                                                <button class="nav-link " id="nav-graph-tab" data-bs-toggle="tab" data-bs-target="#nav-graph" type="button" role="tab" aria-controls="nav-graph" aria-selected="false">그래프</button>
                    </div>
                </nav>
                <div class="tab-content" id="nav-tabContent">
<!--                    <div class="tab-pane fade" id="nav-rank" role="tabpanel" aria-labelledby="nav-rank-tab">-->
                                            <div class="tab-pane fade show active" id="nav-rank" role="tabpanel" aria-labelledby="nav-rank-tab">

                        <div class="check-area pt-2">
                            <div class="mt-3 mb-3">
                                <a href="#" class="btn btn-outline-info active" data-bs-toggle="button" autocomplete="off" name="card-check">멜론(24Hits)
                                    <input type="hidden" name="card-name" value="card-melon" />
                                </a>
                                <a href="#" class="btn btn-outline-info active" data-bs-toggle="button" autocomplete="off" name="card-check">유튜브(주간)
                                    <input type="hidden" name="card-name" value="card-youtube"/> </a>

                                <a href="#" class="btn btn-outline-info active" data-bs-toggle="button" autocomplete="off"  name="card-check">벅스
                                    <input type="hidden" name="card-name" value="card-bugs"/>
                                </a>
                                <a href="#" class="btn btn-outline-info active" data-bs-toggle="button" autocomplete="off" name="card-check">지니
                                    <input type="hidden" name="card-name" value="card-genie"/>
                                </a>
                                <a href="#" class="btn btn-outline-info active" data-bs-toggle="button" autocomplete="off"  name="card-check">플로
                                    <input type="hidden" name="card-name" value="card-flo"/>
                                </a>
                                <a href="#" class="btn btn-outline-info active" data-bs-toggle="button" autocomplete="off" name="card-check">바이브
                                    <input type="hidden" name="card-name" value="card-vibe"/>
                                </a>
                            </div>
                        </div>
                        <div class="album">
                            <div class="container">
                                <div class="row">
                                    <div class="col-12 appear" id="card-melon" style="padding-left:0;padding-right: 0;">
                                        <div class="card mb-1">
                                            <div class="card-body">
                                                <p class="card-title">○ 멜론(24Hits)</p>
                                                <table>
                                                    <colgroup>
                                                        <col width=10%">
                                                        <col width=9%">
                                                        <col/>
                                                    </colgroup>
                                                    <tbody id="melon">

                                                    </tbody>
                                                </table>


                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-12 appear" id="card-youtube" style="padding-left:0;padding-right: 0;">
                                        <div class="card mb-1">
                                            <div class="card-body">
                                                <p class="card-title">○ 유튜브(주간)</p>
                                                <table>
                                                    <colgroup>
                                                        <col width=10%">
                                                        <col width=9%">
                                                        <col/>
                                                    </colgroup>
                                                    <tbody id="youtube">

                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-12 appear" id="card-bugs" style="padding-left:0;padding-right: 0;">
                                        <div class="card mb-1">

                                            <div class="card-body">
                                                <p class="card-title">○ 벅스</p>

                                                <table>
                                                    <colgroup>
                                                        <col width="10%">
                                                        <col width="9%">
                                                        <col/>
                                                    </colgroup>
                                                    <tbody id="bugs">

                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-12 appear" id="card-genie" style="padding-left:0;padding-right: 0;">
                                        <div class="card mb-1">
                                            <div class="card-body">
                                                <p class="card-title">○ 지니</p>

                                                <table>
                                                    <colgroup>
                                                        <col width="10%">
                                                        <col width="9%">
                                                        <col/>
                                                    </colgroup>
                                                    <tbody id="genie">

                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-12 appear" id="card-flo" style="padding-left:0;padding-right: 0;">
                                        <div class="card mb-1">
                                            <div class="card-body">
                                                <p class="card-title">○ 플로</p>
                                                <table>
                                                    <colgroup>
                                                        <col width="10%">
                                                        <col width="9%">
                                                        <col/>
                                                    </colgroup>
                                                    <tbody id="flo">
                                                    </tbody>
                                                </table>

                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-12 appear" id="card-vibe" style="padding-left:0;padding-right: 0;">
                                        <div class="card mb-1">
                                            <div class="card-body">
                                                <p class="card-title">○ 바이브</p>

                                                <table>
                                                    <colgroup>
                                                        <col width="10%">
                                                        <col width="9%">
                                                        <col/>
                                                    </colgroup>
                                                    <tbody id="vibe">

                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>
<!--                    <div class="tab-pane fade show active" id="nav-graph" role="tabpanel" aria-labelledby="nav-graph-tab">-->
                    <div class="tab-pane fade show" id="nav-graph" role="tabpanel" aria-labelledby="nav-graph-tab">
                        <div class="mt-3 mb-3">
                            <a href="#" class="btn btn-outline-info active" data-bs-toggle="button" autocomplete="off"  name="card-graph">멜론
                                <input type="hidden" name="site-name" value="melon" style="display: none;"/>
                            </a>
                            <a href="#" class="btn btn-outline-info" data-bs-toggle="button" autocomplete="off" name="card-graph">유튜브
                                <input type="hidden" name="site-name" value="youtube"/> </a>

                            <a href="#" class="btn btn-outline-info" data-bs-toggle="button" autocomplete="off"  name="card-graph">벅스
                                <input type="hidden" name="site-name" value="bugs"/>
                            </a>
                            <a href="#" class="btn btn-outline-info" data-bs-toggle="button" autocomplete="off" name="card-graph">지니
                                <input type="hidden" name="site-name" value="genie"/>
                            </a>
                            <a href="#" class="btn btn-outline-info" data-bs-toggle="button" autocomplete="off"  name="card-graph">플로
                                <input type="hidden" name="site-name" value="flo"/>
                            </a>
                            <a href="#" class="btn btn-outline-info" data-bs-toggle="button" autocomplete="off" name="card-graph">바이브
                                <input type="hidden" name="site-name" value="vibe"/>
                            </a>
                        </div>
                        <div style="width:100%;overflow-x: scroll;">
                            <div id="canvas-area">
                                <canvas id="chart-area"></canvas>
                            </div>
                        </div>


                    </div>
                </div>
            </div>

        </div>


    </section>


</main>
<footer class="text-muted">
    <div class="container">

        <p class="small text-light">
            <a target="_blank" href="https://open.kakao.com/o/s41Pxd7c">
                <img style="width: 100px;" src="../../images/s41Pxd7c.jpeg"/>
            </a>
            <img class="logo" src="../../images/logo.png"/></p>
        <br/>
        <p class="small" style="font-size: 100%; !important;">
            추가 건의사항이나 아이디어는 <br/>
            QR코드를 스캔하거나 클릭하여 의견을 공유해주세요 !
        </p>
        <br/><br/><br/>
    </div>
</footer>

<script src="../../js/bootstrap.min.js"></script>
<a id="target" style="display: none"></a>

</body>
</html>
